<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Particle Text All At Once</title>
<style>
html,body{
    margin:0;
    background:#000;
    overflow:hidden;
}
canvas{
    display:block;
}
</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let width = window.innerWidth;
let height = window.innerHeight;
canvas.width = width;
canvas.height = height;

window.addEventListener("resize", ()=>{
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
    buildAllWords();
});

const words = ["HAPPY","NEW","YEAR","PARIOOO"];
let allParticles = [];
let fireworks = [];


function buildAllWords(){
    allParticles = [];
    const off = document.createElement("canvas");
    off.width = width;
    off.height = height;
    const offCtx = off.getContext("2d");

    const fontSize = Math.min(width*0.12,120);
    const gap = fontSize*1.5;

    offCtx.fillStyle="#fff";
    offCtx.font=`bold ${fontSize}px Arial`;
    offCtx.textAlign="center";
    offCtx.textBaseline="middle";

    const startY = height/2 - ((words.length-1)*gap)/2;
    words.forEach((w,i)=>offCtx.fillText(w, width/2, startY + i*gap));

    const img = offCtx.getImageData(0,0,width,height).data;

    for(let y=0;y<height;y+=5){
        for(let x=0;x<width;x+=5){
            if(img[(y*width+x)*4+3]>150){
                allParticles.push(new Particle(x,y));
            }
        }
    }
}


class Particle{
    constructor(tx,ty){
        this.tx = tx;
        this.ty = ty;
        this.x = Math.random()*width;
        this.y = height + Math.random()*200;
        this.vx = 0;
        this.vy = 0;
        this.arrived = false;
    }
    update(){
        if(this.arrived) return;
        const dx = this.tx - this.x;
        const dy = this.ty - this.y;
        this.vx += dx*0.003;
        this.vy += dy*0.003;
        this.vx *= 0.85;
        this.vy *= 0.85;
        this.x += this.vx;
        this.y += this.vy;
        if(Math.abs(dx)<1 && Math.abs(dy)<1){
            this.arrived = true;
            this.x = this.tx;
            this.y = this.ty;
        }
    }
    draw(){
        ctx.fillStyle="#fff";
        ctx.shadowBlur=6;
        ctx.shadowColor="#fff";
        ctx.fillRect(this.x,this.y,2,2);
        ctx.shadowBlur=0;
    }
}


class Firework{
    constructor(){
        this.x=Math.random()*width;
        this.y=Math.random()*height*0.5;
        this.particles=[];
        for(let i=0;i<30;i++){
            const a=Math.random()*2*Math.PI;
            const s=Math.random()*3+1;
            this.particles.push({
                x:this.x,
                y:this.y,
                vx:Math.cos(a)*s,
                vy:Math.sin(a)*s,
                life:60,
                color:`hsl(${Math.random()*360},100%,60%)`
            });
        }
        this.life=60;
    }
    update(){
        this.particles.forEach(p=>{
            p.x+=p.vx;
            p.y+=p.vy;
            p.vy+=0.02;
            p.life--;
        });
        this.life--;
    }
    draw(){
        this.particles.forEach(p=>{
            ctx.globalAlpha=p.life/60;
            ctx.fillStyle=p.color;
            ctx.fillRect(p.x,p.y,2,2);
            ctx.globalAlpha=1;
        });
    }
}


setInterval(()=>{
    if(fireworks.length<50){
        fireworks.push(new Firework());
    }
},1000);

function animate(){
    ctx.fillStyle="rgba(0,0,0,0.25)";
    ctx.fillRect(0,0,width,height);

    fireworks.forEach(f=>{f.update();f.draw();});
    fireworks = fireworks.filter(f=>f.life>0);

    allParticles.forEach(p=>{
        p.update();
        p.draw();
    });

    requestAnimationFrame(animate);
}


buildAllWords();
animate();
</script>
</body>
</html>
